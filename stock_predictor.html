<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Price Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .prediction-card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        .prediction-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .chart-container {
            height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Stock Price Predictor</h1>
            <p class="text-lg text-gray-600">Predict future stock prices using machine learning algorithms</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Stock Search and Controls -->
            <div class="bg-white rounded-lg p-6 prediction-card col-span-1">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Stock Selection</h2>
                <div class="mb-4">
                    <label for="stockSymbol" class="block text-sm font-medium text-gray-700 mb-1">Stock Symbol</label>
                    <input type="text" id="stockSymbol" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                           placeholder="e.g. AAPL, MSFT, GOOGL" value="AAPL">
                </div>
                <div class="mb-4">
                    <label for="timePeriod" class="block text-sm font-medium text-gray-700 mb-1">Time Period</label>
                    <select id="timePeriod" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="7">1 Week</option>
                        <option value="30" selected>1 Month</option>
                        <option value="90">3 Months</option>
                        <option value="180">6 Months</option>
                        <option value="365">1 Year</option>
                    </select>
                </div>
                <button id="fetchDataBtn" 
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md shadow-sm transition duration-150 ease-in-out">
                    Fetch Historical Data
                </button>
            </div>

            <!-- Prediction Controls -->
            <div class="bg-white rounded-lg p-6 prediction-card col-span-1">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Prediction Settings</h2>
                <div class="mb-4">
                    <label for="algorithm" class="block text-sm font-medium text-gray-700 mb-1">Algorithm</label>
                    <select id="algorithm" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="linear">Linear Regression</option>
                        <option value="polynomial">Polynomial Regression</option>
                        <option value="randomForest">Random Forest</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="forecastDays" class="block text-sm font-medium text-gray-700 mb-1">Forecast Period (days)</label>
                    <input type="number" id="forecastDays" min="1" max="30" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                           value="7">
                </div>
                <button id="predictBtn" 
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md shadow-sm transition duration-150 ease-in-out">
                    Predict Future Prices
                </button>
            </div>

            <!-- Prediction Results -->
            <div class="bg-white rounded-lg p-6 prediction-card col-span-1">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Prediction Results</h2>
                <div id="predictionResults" class="space-y-2">
                    <img src="https://placehold.co/600x400" alt="Illustration of line chart with upward trend arrow for positive predictions or downward arrow for negative predictions" class="w-full h-auto rounded mb-4"/>
                    <div class="text-center py-8">
                        <p class="text-gray-500">Predictions will appear here</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart Display -->
        <div class="bg-white rounded-lg p-6 prediction-card mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Historical Data Chart</h2>
            <div class="chart-container">
                <canvas id="stockChart"></canvas>
            </div>
        </div>

        <!-- Data Table -->
        <div class="bg-white rounded-lg p-6 prediction-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Historical Data Table</h2>
            <div class="overflow-x-auto">
                <table id="dataTable" class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Open</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">High</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Low</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Close</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Volume</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody" class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td colspan="6" class="px-6 py-4 text-center text-gray-500">No data available. Fetch historical data first.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Mock data for demonstration purposes
        const mockStockData = {
            'AAPL': {
                'labels': ['2023-01-01', '2023-01-02', '2023-01-03', '2023-01-04', '2023-01-05', 
                          '2023-01-06', '2023-01-07', '2023-01-08', '2023-01-09', '2023-01-10'],
                'open': [125.43, 126.67, 127.89, 129.12, 127.50, 
                         128.75, 129.90, 130.25, 131.40, 130.75],
                'high': [126.50, 127.80, 128.95, 130.20, 128.80, 
                         129.85, 130.40, 131.50, 132.60, 131.90],
                'low': [125.20, 126.30, 127.45, 128.80, 127.20, 
                        128.40, 129.60, 130.10, 131.10, 130.40],
                'close': [126.30, 127.70, 128.80, 129.90, 128.60, 
                         129.70, 130.20, 131.30, 132.40, 131.80],
                'volume': [98765432, 87654321, 76543210, 65432109, 54321098, 
                          43210987, 32109876, 21098765, 10987654, 9876543]
            }
        };

        // DOM elements
        const stockSymbolInput = document.getElementById('stockSymbol');
        const timePeriodSelect = document.getElementById('timePeriod');
        const fetchDataBtn = document.getElementById('fetchDataBtn');
        const algorithmSelect = document.getElementById('algorithm');
        const forecastDaysInput = document.getElementById('forecastDays');
        const predictBtn = document.getElementById('predictBtn');
        const predictionResults = document.getElementById('predictionResults');
        const tableBody = document.getElementById('tableBody');
        const stockChartCtx = document.getElementById('stockChart').getContext('2d');

        // Chart instance
        let stockChart = new Chart(stockChartCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Open Price',
                        data: [],
                        borderColor: 'rgba(75, 192, 192, 1)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        tension: 0.1
                    },
                    {
                        label: 'Close Price',
                        data: [],
                        borderColor: 'rgba(153, 102, 255, 1)',
                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                        tension: 0.1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false
                    }
                }
            }
        });

        // Event listeners
        fetchDataBtn.addEventListener('click', fetchHistoricalData);
        predictBtn.addEventListener('click', predictFuturePrices);

        // Functions
        function fetchHistoricalData() {
            const symbol = stockSymbolInput.value.toUpperCase();
            const days = parseInt(timePeriodSelect.value);
            
            // In a real app, this would be an API call to Alpha Vantage or similar
            // For demo purposes, we'll use mock data
            if (mockStockData[symbol]) {
                updateChartAndTable(mockStockData[symbol]);
            } else {
                alert('Stock symbol not found in demo data. Try AAPL, MSFT, or GOOGL.');
            }
        }

        function updateChartAndTable(data) {
            // Update chart
            stockChart.data.labels = data.labels;
            stockChart.data.datasets[0].data = data.open;
            stockChart.data.datasets[1].data = data.close;
            stockChart.update();

            // Update table
            tableBody.innerHTML = '';
            for (let i = 0; i < data.labels.length; i++) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.labels[i]}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.open[i].toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.high[i].toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.low[i].toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.close[i].toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.volume[i].toLocaleString()}</td>
                `;
                tableBody.appendChild(row);
            }
        }

        function predictFuturePrices() {
            const algorithm = algorithmSelect.value;
            const forecastDays = parseInt(forecastDaysInput.value);
            const symbol = stockSymbolInput.value.toUpperCase();
            
            if (!mockStockData[symbol]) {
                alert('Please fetch historical data first');
                return;
            }

            // In a real app, this would send the data to a backend ML model
            // For demo purposes, we'll simulate predictions
            const lastPrice = mockStockData[symbol].close[mockStockData[symbol].close.length - 1];
            const forecastDates = [];
            const forecastPrices = [];
            
            // Generate random walk predictions
            for (let i = 1; i <= forecastDays; i++) {
                forecastDates.push(`Day ${i}`);
                // Simple random walk simulation
                const change = (Math.random() * 4 - 2); // Random change between -2 and +2
                const newPrice = i === 1 ? lastPrice : forecastPrices[i-2] * (1 + change/100);
                forecastPrices.push(newPrice);
            }

            // Update prediction results
            updatePredictionResults(forecastDates, forecastPrices, lastPrice, algorithm);
        }

        function updatePredictionResults(dates, prices, lastPrice, algorithm) {
            const change = ((prices[prices.length - 1] - lastPrice) / lastPrice * 100).toFixed(2);
            const isPositive = parseFloat(change) >= 0;
            
            const resultHTML = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold ${isPositive ? 'text-green-600' : 'text-red-600'} mb-2">
                        ${isPositive ? '+' : ''}${change}%
                    </h3>
                    <p class="text-gray-600">Predicted change over ${dates.length} days</p>
                    <p class="text-sm text-gray-500">Using ${getAlgorithmName(algorithm)}</p>
                </div>
                
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-2">Prediction Chart</h4>
                    <div class="h-64">
                        <canvas id="forecastChart"></canvas>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold text-gray-800 mb-2">Forecast Details</h4>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Predicted Price</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Change</th>
                                </tr>
                            </thead>
                            <tbody id="forecastTableBody" class="bg-white divide-y divide-gray-200">
                                ${dates.map((date, i) => `
                                    <tr>
                                        <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-900">${date}</td>
                                        <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-900">${prices[i].toFixed(2)}</td>
                                        <td class="px-4 py-2 whitespace-nowrap text-sm ${i > 0 ? (prices[i] >= prices[i-1] ? 'text-green-600' : 'text-red-600') : 'text-gray-500'}">
                                            ${i > 0 ? `${((prices[i] - prices[i-1]) / prices[i-1] * 100).toFixed(2)}%` : 'N/A'}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;

            predictionResults.innerHTML = resultHTML;

            // Create forecast chart
            const forecastCtx = document.getElementById('forecastChart').getContext('2d');
            new Chart(forecastCtx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Predicted Price',
                        data: prices,
                        borderColor: isPositive ? 'rgba(16, 185, 129, 1)' : 'rgba(239, 68, 68, 1)',
                        backgroundColor: isPositive ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        function getAlgorithmName(value) {
            const algorithms = {
                'linear': 'Linear Regression',
                'polynomial': 'Polynomial Regression',
                'randomForest': 'Random Forest'
            };
            return algorithms[value] || 'Unknown Algorithm';
        }

        // Initialize with demo data
        fetchHistoricalData();
    </script>
</body>
</html>

